<!DOCTYPE html>
<html>

<head>
  <title></title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script type="text/javascript" src="http://golden-layout.com/files/latest/js/goldenlayout.min.js"></script>
  <link type="text/css" rel="stylesheet" href="http://golden-layout.com/files/latest/css/goldenlayout-base.css" />
  <link type="text/css" rel="stylesheet" href="http://golden-layout.com/assets/css/goldenlayout-light-theme.css" />
  <style>
    *,
    *::after,
    *::before {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html,
    body {
        height: 100%;
        overflow: hidden;
    }

    .gui-container,
    .gui-dashboard {
        width: 100%;
        height: 100%;
    }
  </style>
</head>

<body>
  <div class="gui-container"></div>
  <script>
    const renderDashboard = function(layout) {

        const configDashboard = {
            settings: {
                hasHeaders: false
            },
            content: [{
                type: "row",
                content: [{
                    type: "component",
                    componentName: "component",
                    width: 20,
                    componentState: {
                        text: "Component 2"
                    }
                }, {
                    type: "component",
                    componentName: "component",
                    width: 20,
                    componentState: {
                        text: "Component 2"
                    }
                }, {
                    type: "component",
                    componentName: "component",
                    componentState: {
                        text: "Component 2"
                    }
                }]
            }]
        };

        const layoutDashboard = new window.GoldenLayout(configDashboard, $(".gui-dashboard"));

        layoutDashboard.registerComponent("component", function(container, state) {
            const input = $("<div>component</div>");
            container.getElement().append(input);
        });
        layoutDashboard.init();

        layout.on("stateChanged", function() {
            layoutDashboard.updateSize();
        });

    };

    const render = function() {
        const config = {
            settings: {
                hasHeaders: true,
                constrainDragToContainer: false,
                reorderEnabled: true,
                selectionEnabled: false,
                popoutWholeStack: false,
                blockedPopoutsThrowError: true,
                closePopoutsOnUnload: true,
                showPopoutIcon: false,
                showMaximiseIcon: true,
                showCloseIcon: false
            },
            dimensions: {
                borderWidth: 5,
                minItemHeight: 10,
                minItemWidth: 10,
                headerHeight: 30,
                dragProxyWidth: 300,
                dragProxyHeight: 200
            },
            labels: {
                //close: 'close',
                maximise: "最大化",
                minimise: "还原"
                //popout: 'open in new window'
            },
            content: [{
                type: "column",
                content: [{
                    type: "stack",
                    content: [{
                        type: "component",
                        componentName: "component",
                        title: "Console",
                        isClosable: false
                    }, {
                        type: "component",
                        componentName: "component",
                        title: "Readme",
                        isClosable: false,
                        componentState: {
                            text: "Component 1"
                        }
                    }]
                },
                          {
                              type: "stack",
                              content: [{
                                  type: "component",
                                  componentName: "dashboard",
                                  title: "Dashboard",
                                  isClosable: false
                              }, {
                                  type: "component",
                                  componentName: "component",
                                  title: "Tools",
                                  isClosable: false,
                                  componentState: {
                                      text: "Component 2"
                                  }
                              }]
                          }]
            }]
        };

        const layout = new window.GoldenLayout(config, $(".gui-container"));

        layout.registerComponent("component", function(container, state) {
            const input = $("<div>component</div>");
            container.getElement().append(input);
        });

        layout.registerComponent("dashboard", function(container, state) {
            $('<div class="gui-dashboard"></div>').appendTo(container.getElement());
        });

        layout.init();

        layout.on("initialised", function() {
            renderDashboard(layout);
        });

        window.addEventListener("resize", function() {
            layout.updateSize();
        });

    };

    render();

  </script>
</body>

</html>